@page "/categories/create"
@using ProjectMovies.Client.Pages.Components
@inject ISeviceMovie movie
@inject IErrorMessage showMessage
@inject NavigationManager navigationManager

<h4> Crear categoria de peliculas</h4>


<FormCategory Category = "Category" OnValidSubmit="Create"></FormCategory>

@code{
    private Category Category =new Category();
    
    private async Task Create(){
        var httpResponse = await movie.Post("api/categories", Category);
        if(httpResponse.Error){
           var body = await httpResponse.GetBody();
            await showMessage.ShowErrorMessage(body);
        }else{
            navigationManager.NavigateTo("/categories");
        }
        Console.WriteLine($"Creando la categor√≠a {Category.CategoryType}");
    }
}